<%# index list view template  %>
<div class="collection_index_container">

  <div class="media">
    <% if document[:has_image_ssim] %>
        <% thumb = image_tag(datastream_disseminator_url(document[:has_image_ssim].first.to_s.gsub(/info:fedora\//,''), 'thumbnail300'),
                             :alt => document[blacklight_config.index.show_link.to_sym],
                             :class => 'index_thumb media-object') %>
    <% else %>
        <% thumb = image_tag('collection_index.png',
                             :alt => document[blacklight_config.index.show_link.to_sym],
                             :class => 'index_thumb media-object') %>
    <% end %>
    <%= link_to(thumb, '/collections/' + document[:id], :class => 'pull-left') %>

    <div class="media-body">

      <div class="item_index_title">
        <%= link_to(document[blacklight_config.index.show_link.to_sym], '/collections/' + document[:id]) %>
      </div>

      <div class="collection-location">
        <%# WTF! can't call .first on below unless "if" conditional is used %>
        <%= document[:physical_location_ssim].first if document[:physical_location_ssim] %>
      </div>

      <div class="item_index_details">
        <% if document[:abstract_tsim] %>
            <% abstract_index = document[:abstract_tsim].first %>
            <%= truncate(abstract_index,
                        :length => 300,
                        :separator => ' ',
                        :omission => '... ') %>
            <% if abstract_index.length > 300 %>
                <%= link_to('more',
                           '/collections/' + document[:id],
                           :class => 'read-more-link') %>
            <% end %>
        <% end %>
      </div>

    </div>

  </div>

</div>